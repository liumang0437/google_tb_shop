<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å•†å“å±•ç¤º</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <style>
      /* æ›´æ–°é…è‰²æ–¹æ¡ˆ */
      :root {
        /* äº®è‰²ä¸»é¢˜ */
        --primary-color: #E9014F; /* æ–°çš„ä¸»è‰²è°ƒ */
        --primary-light: #FDE6ED; /* è°ƒæ•´ä¸ºé…å¥—çš„æµ…è‰² */
        --bg-color: #f3f7fd;
        --card-bg: #ffffff;
        --text-primary: #2c2c2c;
        --text-secondary: #666666;
        --border-color: #FDE6ED;
        --shadow-sm: 0 2px 4px rgba(233, 1, 79, 0.05);
        --shadow-md: 0 4px 6px rgba(233, 1, 79, 0.07);
        --shadow-lg: 0 10px 15px rgba(233, 1, 79, 0.1);
        --transition: all 0.3s ease;
      }

      /* æš—è‰²ä¸»é¢˜ */
      [data-theme='dark'] {
        --primary-color: #E9014F;
        --primary-light: #4A1525; /* è°ƒæ•´ä¸ºé…å¥—çš„æ·±è‰² */
        --bg-color: #1a1a1a;
        --card-bg: #2d2d2d;
        --text-primary: #ffffff;
        --text-secondary: #cccccc;
        --border-color: #3d3d3d;
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.25);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
      }

      /* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
      .theme-toggle {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 50%;
        width: 3rem;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: var(--shadow-md);
        transition: var(--transition);
        z-index: 1000;
      }

      .theme-toggle:hover {
        transform: scale(1.1);
      }

      /* å¯¼èˆªæ æ ·å¼è°ƒæ•´ */
      .navbar {
        background: var(--card-bg);
        box-shadow: var(--shadow-sm);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        padding: 1rem 0;
      }

      .navbar .container-fluid {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 1.5rem;
      }

      .navbar-brand {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
      }

      .navbar-right {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      /* è¿”å›æŒ‰é’®æ ·å¼æ›´æ–° */
      .back-button {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 6px;
        transition: all 0.2s ease;
      }

      .back-button:hover {
        color: var(--primary-color);
        background: var(--primary-light);
      }

      .back-button i {
        font-size: 0.875rem;
      }

      /* ç­›é€‰å™¨æ ·å¼ä¼˜åŒ– */
      .filter-item {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        color: var(--text-primary);
      }

      .filter-item:hover {
        color: var(--primary-color);
        background: transparent;
      }

      .filter-item.active {
        color: var(--primary-color);
        background: rgba(233, 1, 79, 0.1);
      }

      /* å•†å“å¡ç‰‡æ ·å¼ä¼˜åŒ– */
      .card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 12px; /* å¢åŠ åœ†è§’ */
        overflow: hidden;
        height: 100%;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .card:hover {
        transform: translateY(-6px);
        box-shadow: var(--shadow-lg);
        border-color: var(--primary-color);
      }

      .card-img-top {
        width: 100%;
        height: 240px;
        object-fit: cover;
        border-radius: 12px 12px 0 0; /* ä¸Šæ–¹åœ†è§’ä¸å¡ç‰‡ä¸€è‡´ */
      }

      .card-body {
        padding: 1rem;
      }

      .card-title {
        font-size: 0.95rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
      }

      .card-text {
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
      }

      .badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        font-weight: normal;
        color: var(--primary-color);
        background: var(--primary-light);
        border-radius: 4px;
        margin: 0 0.25rem 0.25rem 0;
      }

      /* å¹³æ»‘è¿‡æ¸¡ */
      body {
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      * {
        transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-primary);
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        padding-bottom: 100px;
      }

      /* å®¹å™¨å“åº”å¼å¸ƒå±€ */
      .container-fluid {
        width: 100%;
        margin: 0 auto;
        padding: 0 var(--container-padding);
      }

      /* å°äº 768px - æ‰‹æœºç«¯ */
      @media (max-width: 767px) {
        :root {
          --container-padding: 0.875rem;
        }
        .container-fluid {
          max-width: 100%;
        }
      }

      /* 768px - 1024px - å¹³æ¿ç«¯ */
      @media (min-width: 768px) and (max-width: 1024px) {
        :root {
          --container-padding: 1.5rem;
        }
        .container-fluid {
          max-width: 100%;
        }
      }

      /* 1024px - 1440px - å°å±ç”µè„‘ */
      @media (min-width: 1024px) and (max-width: 1440px) {
        .container-fluid {
          max-width: 960px;
        }
      }

      /* 1440px - 1920px - å¸¸è§„ç”µè„‘å±å¹• */
      @media (min-width: 1440px) and (max-width: 1920px) {
        .container-fluid {
          max-width: 1200px;
        }
      }

      /* å¤§äº 1920px - è¶…å®½å±å¹• */
      @media (min-width: 1920px) {
        .container-fluid {
          max-width: 1400px;
        }
      }

      /* è°ƒæ•´ç­›é€‰åŒºåŸŸå°ºå¯¸ */
      .filters-section {
        padding: 1.25rem 0 0 0;
        margin-bottom: 1rem;
        margin-top: 80px;
      }

      .filter-group {
        margin-bottom: 1.25rem;
      }

      .filter-title {
        font-size: 0.875rem; /* 14px */
        font-weight: 600;
        color: var(--text-secondary);
        margin-bottom: 0.75rem;
        display: inline-flex;
        align-items: center;
      }

      .filter-title::before {
        content: '#';
        color: var(--primary-color);
        margin-right: 0.25rem;
      }

      .filter-items {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .filter-item {
        display: inline-flex;
        align-items: center;
        background: transparent;
        color: var(--text-secondary);
        border: none;
        border-radius: 4px;
        padding: 0.375rem 0.75rem;
        font-size: 0.75rem; /* 12px */
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
      }

      .filter-item::before {
        content: 'ğŸ·';
        margin-right: 0.25rem;
        font-size: 0.675rem; /* è°ƒå°ä¸€ç‚¹ç‚¹ï¼Œä¿æŒæ¯”ä¾‹ */
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .filter-item:hover {
        color: var(--primary-color);
        background: transparent;
      }

      .filter-item.active {
        color: var(--primary-color);
        background: rgba(233, 1, 79, 0.1);
      }

      .filter-item.active::before {
        opacity: 1;
      }

      /* æš—è‰²ä¸»é¢˜é€‚é… */
      [data-theme='dark'] .filter-item:hover {
        background: transparent;
      }

      [data-theme='dark'] .filter-item.active {
        background: rgba(233, 1, 79, 0.25);
      }

      /* ç§»åŠ¨ç«¯é€‚é… */
      @media (max-width: 768px) {
        .filters-section {
          padding: 1rem 0;
        }

        .filter-items {
          gap: 0.375rem;
        }

        .filter-item {
          padding: 0.25rem 0.625rem;
          font-size: 0.75rem; /* ä¿æŒ12px */
        }

        .card-img-top {
          height: 200px;
        }
        
        .card-body {
          padding: 0.875rem;
        }
      }

      /* å•†å“ç½‘æ ¼å¸ƒå±€ä¼˜åŒ– */
      .products-grid {
        margin-top: 1rem;
      }

      .row {
        --bs-gutter-x: 1rem;
        --bs-gutter-y: 1rem;
        margin: 0;
      }

      /* è°ƒæ•´å†…å®¹åŒºå¸ƒå±€ */
      .content-row {
        padding: 1rem 0;
        margin: 0;
        gap: 1.5rem; /* ä½¿ç”¨gapæ§åˆ¶å·¦å³ä¸¤æ é—´è· */
      }

      /* è°ƒæ•´å•†å“åˆ—è¡¨åŒºåŸŸ */
      .products-col {
        padding-right: 0; /* ç§»é™¤å³ä¾§å†…è¾¹è· */
      }

      /* è°ƒæ•´ç­›é€‰é¢æ¿ */
      .filters-col {
        background: var(--card-bg);
        border-radius: var(--border-radius);
        padding: 1.25rem;
        height: fit-content;
        position: sticky;
        top: 100px; /* è°ƒæ•´ç²˜æ€§å®šä½çš„è·ç¦»ï¼Œä¸å¯¼èˆªæ é…åˆ */
        box-shadow: var(--shadow-sm);
      }

      /* ç­›é€‰é¢æ¿å†…éƒ¨æ ·å¼ä¼˜åŒ– */
      .filter-section {
        margin-bottom: 1.5rem;
      }

      .filter-section:last-child {
        margin-bottom: 0;
      }

      .filter-section h5 {
        font-size: 0.95rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--text-primary);
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--bg-color);
      }

      /* ç¡®ä¿åˆ—å¸ƒå±€æ­£ç¡® */
      @media (min-width: 992px) {
        .col-lg-9 {
          width: 75%;
          padding: 0;
        }

        .col-lg-3 {
          width: 25%;
          padding: 0;
        }
      }

      /* ç©ºçŠ¶æ€å’ŒåŠ è½½çŠ¶æ€æ ·å¼ */
      .empty-state,
      .loading {
        width: 100%;
        text-align: center;
        padding: 4rem 0;
        color: var(--text-secondary);
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid var(--primary-light);
        border-top-color: var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ– */
      @media (max-width: 991px) {
        .content-row {
          gap: 1rem;
        }

        .filters-col {
          margin-top: 1rem;
        }
      }

      /* ä¼˜åŒ–å¼¹æ¡†åŠ¨ç”»å’Œæ ·å¼ */
      .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1050;
        backdrop-filter: blur(0);
        transition: all 0.3s ease;
        opacity: 1 !important;
      }

      .modal-backdrop.show {
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
      }

      /* å¼¹æ¡†åŸºç¡€æ ·å¼ */
      .modal-content {
        background: var(--card-bg);
        border-radius: 16px;
        width: 90%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        box-shadow: var(--shadow-lg);
        opacity: 0;
        transform: scale(0.95);
        transition: all 0.3s ease;
      }

      .modal-backdrop.show .modal-content {
        opacity: 1;
        transform: scale(1);
      }

      /* å¼¹æ¡†å†…å®¹å¸ƒå±€ */
      .modal-body {
        padding: 0; /* ç§»é™¤é»˜è®¤å†…è¾¹è· */
      }

      .product-image-wrapper {
        width: 100%;
        position: relative;
        background: var(--bg-color);
      }

      .product-image {
        width: 100%;
        display: block;
        object-fit: cover;
      }

      .product-content {
        padding: 1.5rem;
      }

      .product-name {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 1rem;
      }

      .product-category {
        display: inline-flex;
        align-items: center;
        color: var(--text-secondary);
        font-size: 0.875rem;
        margin-bottom: 1rem;
      }

      .product-category i {
        margin-right: 0.5rem;
        color: var(--primary-color);
      }

      .product-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
      }

      .product-tag {
        background: var(--primary-light);
        color: var(--primary-color);
        padding: 0.25rem 0.75rem;
        border-radius: 5px;
        font-size: 10px;
      }

      .product-details {
        color: var(--text-primary);
        font-size: 0.875rem;
        line-height: 1.6;
        margin-bottom: 1rem;
        white-space: pre-wrap;
      }

      .product-contact {
        color: var(--text-secondary);
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .product-contact-label {
        color: var(--text-primary);
      }

      /* è°ƒæ•´å…³é—­æŒ‰é’®çš„æ ·å¼ä»¥ä¿æŒä¸€è‡´æ€§ */
      .modal-close {
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: var(--card-bg);
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: var(--shadow-md);
        z-index: 2;
        transition: all 0.2s ease;
      }

      .modal-close:hover {
        background: var(--primary-light);
        color: var(--primary-color);
        transform: rotate(90deg);
      }
    </style>
  </head>
  <body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
      <div class="container-fluid">
        <div class="navbar-brand">å•†å“åˆ—è¡¨</div>
        <div class="navbar-right">
          <button class="back-button" onclick="history.back()">
            <i class="fas fa-arrow-left"></i>
            è¿”å›
          </button>
        </div>
      </div>
    </nav>

    <!-- ç­›é€‰åŒºåŸŸ -->
    <div class="filters-section">
      <div class="container-fluid">
        <div class="filter-group">
          <div class="filter-title">åˆ†ç±»</div>
          <div class="filter-items" id="categoryFilters">
            <!-- åˆ†ç±»é€‰é¡¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
        <div class="filter-group">
          <div class="filter-title">æ ‡ç­¾</div>
          <div class="filter-items" id="tagFilters">
            <!-- æ ‡ç­¾é€‰é¡¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
      </div>
    </div>

    <!-- å•†å“å±•ç¤ºåŒºåŸŸ -->
    <div class="container-fluid">
      <div class="products-grid">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5" id="productGrid">
          <!-- å•†å“å¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>

    <!-- æ·»åŠ ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
    <button class="theme-toggle" id="themeToggle">
      <i class="fas fa-moon"></i>
    </button>

    <!-- æ›´æ–°å¼¹æ¡†HTMLç»“æ„ -->
    <div class="modal-backdrop" id="productModal">
      <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">Ã—</button>
        <div class="modal-body" id="modalBody"></div>
      </div>
    </div>

    <script>
      let allData = [];
      let selectedCategory = 'å…¨éƒ¨'; // é»˜è®¤é€‰ä¸­"å…¨éƒ¨"
      let selectedTag = 'å…¨éƒ¨';      // é»˜è®¤é€‰ä¸­"å…¨éƒ¨"

      async function loadData() {
        const spreadsheetId = '1Hn9Jkisdf201ufUIO9A-da4y4XgeSpjZEJQtJ3ahLJs' // æ›¿æ¢ä¸ºä½ çš„ Spreadsheet ID
        const url = `https://docs.google.com/spreadsheets/d/${spreadsheetId}/gviz/tq?tq=select *`
        try {
          showLoading();
          const response = await fetch(url)
          const text = await response.text()
          const json = JSON.parse(text.substring(47).slice(0, -2))
          allData = json.table.rows.map((row) => ({
            category: row.c[0]?.v || '', // åˆ†ç±»
            tags: row.c[1]?.v || '', // æ ‡ç­¾
            image: row.c[2]?.v || '', // å•†å“å›¾ç‰‡
            name: row.c[3]?.v || '', // å•†å“åç§°
            price: row.c[4]?.v || '', // å•†å“ä»·æ ¼
            contact: row.c[5]?.v || '', // è”ç³»æ–¹å¼
            details: row.c[6]?.v || '', // å•†å“è¯¦æƒ…
          }))
          renderFilters()
          filterProducts()
        } catch (error) {
          console.error('åŠ è½½æ•°æ®å¤±è´¥:', error)
          document.getElementById('productGrid').innerHTML = '<p class="text-center">æ•°æ®åŠ è½½å¤±è´¥</p>'
        }
      }

      function renderFilters() {
        const categories = ['å…¨éƒ¨', ...new Set(allData.map((item) => item.category).filter(Boolean))];
        const tags = ['å…¨éƒ¨', ...new Set(
          allData.flatMap((item) =>
            item.tags
              .split(',')
              .map((t) => t.trim())
              .filter(Boolean)
          )
        )];

        const categoryFilters = document.getElementById('categoryFilters');
        const tagFilters = document.getElementById('tagFilters');

        // æ¸²æŸ“åˆ†ç±»é€‰é¡¹
        categories.forEach((category) => {
          const div = document.createElement('div');
          div.className = `filter-item ${category === selectedCategory ? 'active' : ''}`;
          div.textContent = category;
          div.onclick = () => {
            // ç§»é™¤æ‰€æœ‰åˆ†ç±»çš„é€‰ä¸­çŠ¶æ€
            categoryFilters.querySelectorAll('.filter-item').forEach(item => {
              item.classList.remove('active');
            });
            
            // è®¾ç½®å½“å‰åˆ†ç±»ä¸ºé€‰ä¸­çŠ¶æ€
            div.classList.add('active');
            selectedCategory = category;
            
            filterProducts();
          };
          categoryFilters.appendChild(div);
        });

        // æ¸²æŸ“æ ‡ç­¾é€‰é¡¹
        tags.forEach((tag) => {
          const div = document.createElement('div');
          div.className = `filter-item ${tag === selectedTag ? 'active' : ''}`;
          div.textContent = tag;
          div.onclick = () => {
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„é€‰ä¸­çŠ¶æ€
            tagFilters.querySelectorAll('.filter-item').forEach(item => {
              item.classList.remove('active');
            });
            
            // è®¾ç½®å½“å‰æ ‡ç­¾ä¸ºé€‰ä¸­çŠ¶æ€
            div.classList.add('active');
            selectedTag = tag;
            
            filterProducts();
          };
          tagFilters.appendChild(div);
        });
      }

      function showLoading() {
        const productGrid = document.getElementById('productGrid');
        productGrid.innerHTML = `
          <div class="loading">
            <div class="loading-spinner"></div>
            <p>æ­£åœ¨åŠ è½½å•†å“...</p>
          </div>
        `;
      }

      function renderProducts(data) {
        const productGrid = document.getElementById('productGrid');
        productGrid.innerHTML = '';

        if (data.length === 0) {
          productGrid.innerHTML = `
            <div class="empty-state">
              <i class="fas fa-search fa-3x mb-3"></i>
              <h4>æœªæ‰¾åˆ°ç›¸å…³å•†å“</h4>
              <p>è¯·å°è¯•å…¶ä»–ç­›é€‰æ¡ä»¶</p>
            </div>
          `;
          return;
        }

        data.forEach((item) => {
          const card = document.createElement('div');
          card.className = 'col';
          card.innerHTML = `
            <div class="card" onclick="showProductDetails(${JSON.stringify(item).replace(/"/g, '&quot;')})">
              <img src="${item.image}" class="card-img-top" alt="${item.name}">
              <div class="card-body">
                <h5 class="card-title">${item.name}</h5>
                <p class="card-text">Â¥ ${item.price}</p>
                <p class="card-text">
                  <i class="fas fa-tag"></i> ${item.category}
                </p>
                ${item.tags
                  .split(',')
                  .map((tag) => `<span class="badge">${tag.trim()}</span>`)
                  .join('')}
              </div>
            </div>
          `;
          productGrid.appendChild(card);
        });
      }

      function filterProducts() {
        const filtered = allData.filter((item) => {
          // åˆ†ç±»ç­›é€‰
          const matchesCategory = selectedCategory === 'å…¨éƒ¨' || item.category === selectedCategory;
          
          // æ ‡ç­¾ç­›é€‰
          const itemTags = item.tags
            .split(',')
            .map((t) => t.trim())
            .filter(Boolean);
          const matchesTag = selectedTag === 'å…¨éƒ¨' || itemTags.includes(selectedTag);
          
          return matchesCategory && matchesTag;
        });

        renderProducts(filtered);
      }

      // é¡µé¢åŠ è½½æ—¶è·å–æ•°æ®
      loadData();

      // æ·»åŠ ä¸»é¢˜åˆ‡æ¢çš„JavaScript
      const themeToggle = document.getElementById('themeToggle');
      const icon = themeToggle.querySelector('i');

      // æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„ä¸»é¢˜è®¾ç½®
      const currentTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', currentTheme);
      updateThemeIcon(currentTheme);

      themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';

        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
      });

      function updateThemeIcon(theme) {
        icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
      }

      // æ›´æ–°æ˜¾ç¤ºå¼¹æ¡†å‡½æ•°
      function showProductDetails(item) {
        const modal = document.getElementById('productModal');
        const modalBody = document.getElementById('modalBody');

        modalBody.innerHTML = `
          <div class="product-image-wrapper">
            <img src="${item.image}" class="product-image" alt="${item.name}">
          </div>
          <div class="product-content">
            <h2 class="product-name">${item.name}</h2>
            <div class="product-category">
              <i class="fas fa-folder"></i>
              <span>${item.category}</span>
            </div>
            <div class="product-tags">
              ${item.tags
                .split(',')
                .map(tag => `<span class="product-tag">${tag.trim()}</span>`)
                .join('')}
            </div>
            <div class="product-details">
              ${item.details || 'æš‚æ— è¯¦ç»†æè¿°'}
            </div>
            <div class="product-contact">
              <span class="product-contact-label">è”ç³»æ–¹å¼:</span>
              <span>${item.contact}</span>
            </div>
          </div>
        `;

        modal.style.display = 'flex';
        setTimeout(() => {
          modal.classList.add('show');
        }, 10);
        document.body.style.overflow = 'hidden';
      }

      // æ›´æ–°å…³é—­å¼¹æ¡†å‡½æ•°
      function closeModal() {
        const modal = document.getElementById('productModal');
        modal.classList.remove('show');
        setTimeout(() => {
          modal.style.display = 'none';
          document.body.style.overflow = '';
        }, 300);
      }

      // æ·»åŠ é”®ç›˜äº‹ä»¶æ”¯æŒ
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeModal();
        }
      });

      // ä¼˜åŒ–ç‚¹å‡»äº‹ä»¶å¤„ç†
      document.getElementById('productModal').addEventListener('click', (e) => {
        if (e.target.id === 'productModal') {
          closeModal();
        }
      });
    </script>
  </body>
</html>
